/* lungo v2.1.0 - 2013/2/26
   http://lungo.tapquo.com
   Copyright (c) 2013 Tapquo S.L. - Licensed GPLv3, Commercial */
var Lungo;Lungo=Lungo||{},Lungo.VERSION="2.2",Lungo.DEVICE=null,Lungo.Element||(Lungo.Element={}),Lungo.Data||(Lungo.Data={}),Lungo.Sugar||(Lungo.Sugar={}),Lungo.View||(Lungo.View={}),Lungo.Boot||(Lungo.Boot={}),Lungo.Device||(Lungo.Device={}),Lungo.ready||(Lungo.ready=Quo().ready),Lungo.Attributes={count:{selector:"*",html:'<span class="tag theme count">{{value}}</span>'},pull:{selector:"section",html:'<div class="{{value}}" data-control="pull" data-icon="down" data-loading="black">\n  <strong>title</strong>\n</div>'},progress:{selector:"*",html:'<div class="progress">\n  <span class="bar"><span class="value" style="width:{{value}};"></span></span>\n</div>'},label:{selector:"*",html:"<abbr>{{value}}</abbr>"},icon:{selector:"*",html:'<span class="icon {{value}}"></span>'},image:{selector:"*",html:'<img src="{{value}}" class="icon" />'},title:{selector:"header",html:'<span class="title centered">{{value}}</span>'},loading:{selector:"*",html:'<div class="loading {{value}}">\n  <span class="top"></span>\n  <span class="right"></span>\n  <span class="bottom"></span>\n  <span class="left"></span>\n</div>'},back:{selector:"header",html:'<nav class="left"><a href="#" data-view-section="back"><span class="icon {{value}}"></span></a></nav>'}},Lungo.Constants={ELEMENT:{SECTION:"section",ARTICLE:"article",ASIDE:"aside",MENU:"menu",BODY:"body",DIV:"div",LIST:"<ul></ul>",LI:"li"},QUERY:{ARTICLE_ROUTER:"[data-view-article]",SECTION_ROUTER:"[data-view-section]",ARTICLE_ROUTER_TOUCH:"header [data-view-article], footer [data-view-article], nav[data-control] [data-view-article]",SECTION_ROUTER_TOUCH:"header [data-view-section], footer [data-view-section], nav[data-control] [data-view-section]",ARTICLE_ROUTER_TAP:"article [data-view-article]",SECTION_ROUTER_TAP:"article [data-view-section]",ASIDE_ROUTER:"[data-view-aside]",MENU_ROUTER:"[data-view-menu]",LIST_IN_ELEMENT:"article.list",ELEMENT_SCROLLABLE:"article.scroll",HREF_ASIDE:"section[data-aside].drag",HREF_ROUTER:"a[href][data-router]",MENU_HREF:"[data-control=menu] a[href]",INPUT_CHECKBOX:"input[type=range].checkbox",NAVIGATION_ITEM:'a[href][data-router="article"]',ARTICLE_REFERENCE:"[data-article]",TITLE:"header .title, footer .title",ACTIVE_LIST_ITEM:"li a.active, li.active"},CLASS:{ACTIVE:"active",ASIDE:"aside",SHOW:"show",HIDE:"hide",HIDING:"hiding",RIGHT:"right",LEFT:"left",HORIZONTAL:"horizontal",SMALL:"small"},TRIGGER:{LOAD:"load",UNLOAD:"unload"},TRANSITION:{DURATION:400,ORIGIN:"transition-origin",ATTR:"transition"},ATTRIBUTE:{ID:"id",HREF:"href",TITLE:"title",ARTICLE:"article",CLASS:"class",WIDTH:"width",HEIGHT:"height",PIXEL:"px",PERCENT:"%",ROUTER:"router",FIRST:"first",LAST:"last",EMPTY:"",CHILDREN:"children",TRANSITION:"transition"},BINDING:{START:"{{",END:"}}",KEY:"value",SELECTOR:"{{value}}"},DEVICE:{PHONE:"phone",TABLET:"tablet",TV:"tv"},ERROR:{DATABASE:"ERROR: Connecting to Data.Sql.",DATABASE_TRANSACTION:"ERROR: Data.Sql >> ",ROUTER:"ERROR: The target does not exists >>",LOADING_RESOURCE:"ERROR: Loading resource: "}},Lungo.Core=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;return n=Array.prototype,f=function(t,n){if(!e.Core.isMobile())return console[t===1?"log":t===2?"warn":"error"](n)},s=function(){var e,t;e=h(arguments),t=e.shift();if(p(t)==="function")return t.apply(null,e)},r=function(e,t){return function(){return t.apply(e,h(arguments))}},l=function(){var e,t,n,r,i;n=n||{},e=0,r=arguments.length;while(e<r){t=arguments[e];for(i in t)a(t,i)&&(n[i]=t[i]);e++}return n},a=function(e,n){return t.isOwnProperty(e,n)},p=function(e){return t.toType(e)},h=function(e){return n.slice.call(e,0)},u=function(){return t.isMobile()},i=function(){return t.environment()},c=function(e,t,n){var r;return r=n==="desc"?-1:1,e.sort(function(e,n){return e[t]<n[t]?-r:e[t]>n[t]?r:0})},o=function(e,t,n){var r,i,s,o;o=null,i=0,s=e.length;while(i<s){r=e[i];if(r[t]===n){o=r;break}i++}return o},{log:f,execute:s,bind:r,mix:l,isOwnProperty:a,toType:p,toArray:h,isMobile:u,environment:i,orderByProperty:c,findByProperty:o}}(Lungo,Quo),Lungo.dom=function(e){return $$(e)},Lungo.Events=function(e){var t,n;return t=" ",n=function(n){var r,i,s,o,u;u=[];for(i in n)o=i.indexOf(t),o>0?(s=i.substring(0,o),r=i.substring(o+1),u.push(e.dom(document.body).delegate(r,s,n[i]))):u.push(void 0);return u},{init:n}}(Lungo),Lungo.Fallback=function(e){var t,n;return t=function(){var t;return t=e.Core.environment(),n("position",t.isMobile&&t.os.name==="Android"&&t.os.version<"3"?"absolute":"fixed")},n=function(t,n){return e.dom(document.body).data(t,n)},{fixPositionInAndroid:t}}(Lungo),Lungo.init=function(e){return e&&e.resources&&Lungo.Resource.load(e.resources),Lungo.Boot.Device.init(),Lungo.Boot.Events.init(),Lungo.Boot.Data.init(),Lungo.Boot.Layout.init(e)},Lungo.Notification=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;return E=[],m=null,T=null,s=1,t=200,n=e.Constants.ATTRIBUTE,r=e.Constants.BINDING,u={BODY:"body",NOTIFICATION:".notification",MODAL:".notification .window",MODAL_HREF:".notification .window a",WINDOW_CLOSABLE:".notification [data-action=close], .notification > .error, .notification > .success",CONFIRM_BUTTONS:".notification .confirm a.button"},a={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},i="Lungo.Notification.hide()",o='<div class="notification"><div class="window"></div></div>',p=function(t,n,i,s){var o,u;return u=void 0,t!==void 0?u=b(t,null,n):(o=e.Attributes.loading.html,u=o.replace(r.START+r.KEY+r.END,"icon white")),S(u,"growl"),g(i,s)},c=function(){return T.removeClass("show"),setTimeout(function(){return m.style("display","none").removeClass("html").removeClass("confirm").removeClass("notify").removeClass("growl")},t-50)},f=function(e){var t;return E=e,t=b(e.title,e.description,e.icon),t+=v(e.accept,"accept"),t+=v(e.cancel,"cancel"),S(t,"confirm")},d=function(e,t,n,r,i){return w(e,t,n,"success",r,i)},l=function(e,t,n,r,i){return w(e,t,n,"error",r,i)},w=function(e,t,n,r,i,s){S(b(e,t,n),r);if(i)return g(i,s)},h=function(e,t){return e+=t?'<a href="#" class="button large anchor" data-action="close">'+t+"</a>":"",S(e,"html")},y=function(){return e.dom(u.BODY).append(o),m=e.dom(u.NOTIFICATION),T=m.children(".window"),x()},S=function(e,t){return m.show(),T.removeClass(a.SHOW),T.removeClass("error").removeClass("success").removeClass("html").removeClass("growl"),T.addClass(t),T.html(e),setTimeout(function(){return T.addClass(a.SHOW)},s)},g=function(e,n){var r;if(e!==void 0&&e!==0)return r=e*1e3,setTimeout(function(){c();if(n)return setTimeout(n,t)},r)},b=function(e,t,n){return t=t?t:"&nbsp;",'<span class="icon '+n+'"></span><strong class="text bold">'+e+"</strong><small>"+t+"</small>"},v=function(e,t){return'<a href="#" data-callback="'+t+'" class="button anchor large text thin">'+e.label+"</a>"},x=function(){return e.dom(u.CONFIRM_BUTTONS).tap(function(t){var n,r;return n=e.dom(this),r=E[n.data("callback")].callback,r&&r.call(r),c()}),e.dom(u.WINDOW_CLOSABLE).tap(c)},y(),{show:p,hide:c,error:l,success:d,confirm:f,html:h}}(Lungo),Lungo.Resource=function(e,t){var n,r,i,s,o,u;return n=e.Constants.ELEMENT,r=e.Constants.ERROR,i=function(t,n){var r,i,o;if(e.Core.toType(t)==="array"){r=0,i=t.length,o=[];while(r<i)s(t[r]),o.push(r++);return o}return s(t,n)},s=function(t,n){try{return u(o(t),n)}catch(r){return e.Core.log(3,r.message)}},o=function(e){return t.ajax({url:e,async:!1,dataType:"html",error:function(){return console.error(r.LOADING_RESOURCE+e)}})},u=function(t,r){if(e.Core.toType(t)==="string")return r=r?r:n.BODY,e.dom(r).append(t)},{load:i}}(Lungo,Quo),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;return o=e.document,u=o.documentElement,r="scroll-enabled",n="ontouchmove"in o,c="WebkitOverflowScrolling"in u.style||!n&&e.screen.width>1200||function(){var t,n,r,i;return t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),i=n&&n[1],r=n&&i>=534,t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&r||t.match(RegExp(" Version\\/([0-9]+)"))&&RegExp.$1>=0&&e.blackberry&&r||t.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&r||t.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&r||t.match(/NokiaBrowser\/([0-9\.]+)/)&&parseFloat(RegExp.$1)===7.3&&n&&i>=533}(),s=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},f=!1,h=void 0,p=function(t,n){var r,i,s,o,u,a,f;s=0,a=t.scrollLeft,f=t.scrollTop,u={top:"+0",left:"+0",duration:100,easing:e.overthrow.easing},r=void 0,i=void 0;if(n)for(o in u)n[o]!==void 0&&(u[o]=n[o]);return typeof u.left=="string"?(u.left=parseFloat(u.left),r=u.left+a):(r=u.left,u.left=u.left-a),typeof u.top=="string"?(u.top=parseFloat(u.top),i=u.top+f):(i=u.top,u.top=u.top-f),h=setInterval(function(){return s++<u.duration?(t.scrollLeft=u.easing(s,a,u.left,u.duration),t.scrollTop=u.easing(s,f,u.top,u.duration)):(r!==t.scrollLeft&&(t.scrollLeft=r),i!==t.scrollTop&&(t.scrollTop=i),l())},1),{top:i,left:r,duration:u.duration,easing:u.easing}},i=function(e,t){return!t&&e.className&&e.className.indexOf("scroll")>-1&&e||i(e.parentNode)},l=function(){return clearInterval(h)},a=function(){var t,a,h,d,v,m,g,y,b,E,S,x;if(f)return;f=!0;if(c||n)u.className+=" "+r;e.overthrow.forget=function(){return u.className=u.className.replace(r,""),o.removeEventListener&&o.removeEventListener("touchstart",x,!1),e.overthrow.easing=s,f=!1};if(c||!n)return;return a=void 0,y=[],m=[],v=void 0,g=void 0,E=function(){return y=[],v=null},b=function(){return m=[],g=null},h=function(){var e,t,n;n=(y[0]-y[y.length-1])*8,t=(m[0]-m[m.length-1])*8,e=Math.max(Math.abs(t),Math.abs(n))/8,n=(n>0?"+":"")+n,t=(t>0?"+":"")+t;if(!isNaN(e)&&e>0&&(Math.abs(t)>80||Math.abs(n)>80))return p(a,{left:t,top:n,duration:e})},d=void 0,S=function(e){var t,n,r;d=a.querySelectorAll("textarea, input"),t=0,n=d.length,r=[];while(t<n)d[t].style.pointerEvents=e,r.push(t++);return r},t=function(e,t){var n,r;if(o.createEvent){n=(!t||t===void 0)&&a.parentNode||a.touchchild||a,r=void 0;if(n!==a)return r=o.createEvent("HTMLEvents"),r.initEvent("touchend",!0,!0),a.dispatchEvent(r),n.touchchild=a,a=n,n.dispatchEvent(e)}},x=function(e){var n,r,s,o,f,c,p,d,w,x,T;l(),E(),b(),a=i(e.target);if(!a||a===u||e.touches.length>1)return;return S("none"),x=e,c=a.scrollTop,f=a.scrollLeft,r=a.offsetHeight,T=a.offsetWidth,w=e.touches[0].pageY,d=e.touches[0].pageX,o=a.scrollHeight,p=a.scrollWidth,s=function(e){var n,i,s,u;u=c+w-e.touches[0].pageY,s=f+d-e.touches[0].pageX,n=u>=(y.length?y[0]:0),i=s>=(m.length?m[0]:0),u>0&&u<o-r||s>0&&s<p-T?e.preventDefault():t(x),v&&n!==v&&E(),g&&i!==g&&b(),v=n,g=i,a.scrollTop=u,a.scrollLeft=s,y.unshift(u),m.unshift(s),y.length>3&&y.pop();if(m.length>3)return m.pop()},n=function(e){return h(),S("auto"),setTimeout(function(){return S("none")},450),a.removeEventListener("touchmove",s,!1),a.removeEventListener("touchend",n,!1)},a.addEventListener("touchmove",s,!1),a.addEventListener("touchend",n,!1)},o.addEventListener("touchstart",x,!1)},e.overthrow={set:a,forget:function(){},easing:s,toss:p,intercept:l,closest:i,support:c?"native":n&&"polyfilled"||"none"},a()}(this),Lungo.Service=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;return r="lungojs_service_cache",n={MINUTE:"minute",HOUR:"hour",DAY:"day"},s=function(e,n,r,i){return t.get(e,n,r,i)},u=function(e,n,r,i){return t.post(e,n,r,i)},o=function(e,n,r){return t.json(e,n,r)},i=function(n,r,i,s,o){var u,a;u=n+t.serializeParameters(r);if(!h(u,i))return t.get(n,r,function(e){return c(u,e),s.call(s,e)},o);a=e.Data.Storage.persistent(u);if(a)return s.call(s,a)},h=function(t,n){var i,s,o;return i=!1,o=e.Data.Storage.persistent(r),o&&(s=f(o[t]),i=l(s,n)),i},f=function(e){var t,n;return t=(new Date).getTime(),n=(new Date(e)).getTime(),t-n},l=function(e,t){var n,r;return r=t.split(" "),n=a(r[1],e),n<r[0]?!0:!1},a=function(e,t){var r;return r=t/1e3/60,e.indexOf(n.HOUR)>=0?r/=60:e.indexOf(n.DAY)>=0&&(r=r/60/24),r},c=function(t,n){var i;return i=e.Data.Storage.persistent(r)||{},i[t]=new Date,e.Data.Storage.persistent(r,i),e.Data.Storage.persistent(t,n)},{get:s,post:u,json:o,cache:i,Settings:t.ajaxSettings}}(Lungo,Quo),Lungo.Boot.Data=function(e){var t,n,r,i,s;return t=e.Constants.BINDING,n=function(t){var n;n=e.dom(t||document.body);if(n.length>0)return i(n)},i=function(t){var n,r;r=[];for(n in e.Attributes)e.Core.isOwnProperty(e.Attributes,n)?r.push(s(t,n)):r.push(void 0);return r},s=function(t,n){var i,s;return i=e.Attributes[n],s=i.selector+"[data-"+n+"]",t.find(s).each(function(t,s){var o;return o=e.dom(s),r(o,o.data(n),i.html)})},r=function(e,n,r){var i;return i=r.replace(t.START+t.KEY+t.END,n),e.prepend(i)},{init:n}}(Lungo),Lungo.Boot.Device=function(e){var t,n;return t=e.Constants.DEVICE,n=function(){var n;n=e.Core.environment(),e.DEVICE=n.screen.width<768?t.PHONE:t.TABLET,e.dom(document.body).data("device",e.DEVICE);if(e.DEVICE===e.Constants.DEVICE.PHONE)return e.Aside.draggable()},{init:n}}(Lungo),Lungo.Boot.Events=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d;return n=e.Constants,t=e.Constants.ATTRIBUTE,r=e.Constants.CLASS,i=e.Constants.ELEMENT,s=e.Constants.QUERY,o={INPUT_CHECKBOX:"input[type=range].checkbox"},u=function(){return e.dom(n.QUERY.SECTION_ROUTER_TOUCH).touch(d),e.dom(n.QUERY.ARTICLE_ROUTER_TOUCH).touch(l),e.dom(n.QUERY.SECTION_ROUTER_TAP).tap(d),e.dom(n.QUERY.ARTICLE_ROUTER_TAP).tap(l),e.dom(n.QUERY.ASIDE_ROUTER).touch(c),e.dom(n.QUERY.MENU_ROUTER).touch(p),e.dom(s.MENU_HREF).touch(f),e.dom(s.INPUT_CHECKBOX).touch(a)},d=function(t){var r,i;return t.preventDefault(),r=e.dom(this),r.data("async")?h(r,n.ELEMENT.SECTION):(i=r.data("view-section"),i!=="back"?e.Router.section(i):e.Router.back())},l=function(t){var r;return t.preventDefault(),r=e.dom(this),r.data("async")?h(r,n.ELEMENT.ARTICLE):(e.Router.article(e.Router.history(),r.data("view-article"),r),e.Aside.hide())},h=function(t,r){var i,s,o,u,a,f,l;u=t.data("async"),i=t.data("view-"+r),e.Notification.show(),r===n.ELEMENT.ARTICLE?(o=e.Element.Cache.section.attr(n.ATTRIBUTE.ID),e.Resource.load(u,n.ELEMENT.SECTION+"#"+o)):e.Resource.load(u),e.Boot.Data.init("#"+i),l=e.dom("[data-async='"+u+"']");for(a=0,f=l.length;a<f;a++)s=l[a],s.removeAttribute("data-async");return setTimeout(function(){return r===n.ELEMENT.ARTICLE?(e.Router.article(o,i),e.Aside.hide()):e.Router.section(i),e.Notification.hide()},e.Constants.TRANSITION.DURATION*2)},c=function(t){return t.preventDefault(),e.Aside.toggle()},p=function(t){var n;return t.preventDefault(),n=e.dom(this).data("view-menu"),e.dom("[data-control=menu]#"+n).toggleClass(r.SHOW)},f=function(t){var i,s;return t.preventDefault(),i=e.dom(this),s=i.parent("[data-control=menu]").removeClass(r.SHOW).attr(n.ATTRIBUTE.ID),e.dom("[data-view-menu="+s+"] > .icon").attr("class","icon "+i.data("icon"))},a=function(t){var n,r;return t.preventDefault(),r=e.dom(this),n=r.val()>0?0:1,r.toggleClass("active").attr("value",n)},{init:u}}(Lungo),Lungo.Boot.Layout=function(e){var t,n,r,i,s,o,u,a;return t=e.Constants,n="#",r=function(n){var r;return e.Fallback.fixPositionInAndroid(),(n!=null?n.history:void 0)!=null&&n.history===!0&&((r=window.location.hash)!=null?r.length:void 0)>=2?u():o(),s(t.QUERY.LIST_IN_ELEMENT,i),s(t.QUERY.ELEMENT_SCROLLABLE,a)},u=function(){var t,r,i,s,o,u;r=window.location.hash.replace(n,"").split("/"),s=r[r.length-2],t=r[r.length-1];if(r.length>2){r.length-=2;for(o=0,u=r.length;o<u;o++)i=r[o],e.Router.step(i)}return e.Router.section(s),e.Router.article(s,t)},o=function(){var n;n=e.dom(t.ELEMENT.SECTION).first();if(n)return e.Router.section(n.attr(t.ATTRIBUTE.ID))},s=function(t,n){var r,i,s,o,u;i=e.dom(t),s=0,o=i.length,u=[];while(s<o)r=e.dom(i[s]),e.Core.execute(n,r),u.push(s++);return u},i=function(e){var n;if(e.children().length===0)return n=e.attr(t.ATTRIBUTE.ID),e.append(t.ELEMENT.LIST)},a=function(e){return e[0].addEventListener("touchstart",function(e){var t;t=this.scrollTop,t<=1&&(this.scrollTop=1);if(t+this.offsetHeight>=this.scrollHeight)return this.scrollTop=this.scrollHeight-this.offsetHeight-1},!1)},{init:r}}(Lungo),Lungo.Data.Cache=function(e){var t,n,r,i,s;return s={},i=function(r,i){return t(r)?s[r]=e.Core.mix(n(r),i):s[r]=i},n=function(e,t){return arguments.length===1?s[e]:s[arguments[0]]?s[arguments[0]][arguments[1]]:void 0},r=function(e,t){return arguments.length===1?delete s[e]:delete s[arguments[0]][arguments[1]]},t=function(e){return s[e]?!0:!1},{set:i,get:n,remove:r,exists:t}}(Lungo),Lungo.Data.Sql=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;return n=e.Constants.ERROR,t={name:"lungo_db",version:"1.0",size:65536,schema:[]},r=null,o=function(i){t=e.Core.mix(t,i),r=openDatabase(t.name,t.version,t.name,t.size);if(r)return h();throw new Error(n.DATABASE)},a=function(e,t,n){var r;return r=t?" WHERE "+c(t,"AND"):"",s("SELECT * FROM "+e+r,function(e){var t,r,i;i=[],t=0,r=e.rows.length;while(t<r)i.push(e.rows.item(t)),t++;return l(n,i)})},u=function(t,n,r){var i,s;if(e.Core.toType(n)==="object")return v(t,n);s=[];for(i in n)s.push(v(t,n[i]));return s},f=function(e,t,n,r){var i;return i="UPDATE "+e+" SET "+c(t,","),n&&(i+=" WHERE "+c(n,"AND")),s(i)},i=function(e,t,n){var r;return r=t?" WHERE "+c(t,"AND"):"",s("DELETE FROM "+e+r+";")},s=function(t,n){return e.Core.log(1,"lng.Data.Sql >> "+t),r.transaction(function(e){return e.executeSql(t,[],function(e,t){return l(n,t)},function(e,n){return e.executedQuery=t,g.apply(null,arguments)})})},h=function(){var e,n,r,i,s;r=t.schema,i=r.length;if(!i)return;n=0,s=[];while(n<i)e=r[n],m(e),p(e.name,e.fields),s.push(n++);return s},p=function(t,n){var r,i;i="";for(r in n)e.Core.isOwnProperty(n,r)&&(i&&(i+=", "),i+=r+" "+n[r]);return s("CREATE TABLE IF NOT EXISTS "+t+" ("+i+");")},m=function(e){if(e.drop===!0)return d(e.name)},d=function(e){return s("DROP TABLE IF EXISTS "+e)},c=function(t,n){var r,i,s;i="";for(r in t)e.Core.isOwnProperty(t,r)&&(s=t[r],i&&(i+=" "+n+" "),i+=r+"=",i+=isNaN(s)?'"'+s+'"':s);return i},l=function(t,n){if(e.Core.toType(t)==="function")return setTimeout(t,100,n)},v=function(t,n){var r,i,o,u;i="",u="";for(r in n)e.Core.isOwnProperty(n,r)&&(o=n[r],i+=i?", "+r:r,u&&(u+=", "),u+=isNaN(o)||o===""?'"'+o+'"':o);return s("INSERT INTO "+t+" ("+i+") VALUES ("+u+")")},g=function(e,t){throw new Error(n.DATABASE_TRANSACTION+t.code+": "+t.message+" \n Executed query: "+e.executedQuery)},{init:o,select:a,insert:u,update:f,drop:i,execute:s}}(Lungo),Lungo.Data.Storage=function(e){var t,n,r,i,s,o,u;return t={PERSISTENT:"localStorage",SESSION:"sessionStorage"},n=function(e,n){return s(t.PERSISTENT,e,n)},r=function(e,n){return s(t.SESSION,e,n)},s=function(e,t,n){return e=window[e],n?u(e,t,n):n===null?o(e,t):i(e,t)},u=function(e,t,n){return n=JSON.stringify(n),e.setItem(t,n)},o=function(e,t){return e.removeItem(t)},i=function(e,t){var n;return n=e.getItem(t),JSON.parse(n)},{session:r,persistent:n}}(Lungo),Lungo.Element.Cache={section:null,article:null,aside:null,navigation:null},Lungo.Element.Carousel=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;return u={index:0,speed:300,callback:t,container:e,element:e.children[0],slide:void 0,slides:[],slides_length:0,width:0,start:{},isScrolling:void 0,deltaX:0},i=function(e){if(u.index)return f(u.index-1,u.speed)},n=function(e){return u.index<u.slides_length-1?f(u.index+1,u.speed):f(0,u.speed)},r=function(){return u.index},s=function(){return a()},a=function(){var e,t;u.slides=u.element.children,u.slides_length=u.slides.length;if(u.slides_length<2)return null;u.width="getBoundingClientRect"in u.container?u.container.getBoundingClientRect().width:u.container.offsetWidth;if(!u.width)return null;u.element.style.width=u.slides.length*u.width+"px",t=u.slides.length;while(t--)e=u.slides[t],e.style.width=u.width+"px",e.style.display="table-cell",e.style.verticalAlign="top";return f(u.index,0),u.container.style.visibility="visible"},f=function(e,t){var n;return n=u.element.style,t===void 0&&(t=u.speed),n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms",n.MozTransform=n.webkitTransform="translate3d("+ -(e*u.width)+"px,0,0)",n.msTransform=n.OTransform="translateX("+ -(e*u.width)+"px)",u.index=e},o=function(){return u.element.addEventListener("touchstart",h,!1),u.element.addEventListener("touchmove",c,!1),u.element.addEventListener("touchend",l,!1),u.element.addEventListener("webkitTransitionEnd",p,!1),u.element.addEventListener("msTransitionEnd",p,!1),u.element.addEventListener("oTransitionEnd",p,!1),u.element.addEventListener("transitionend",p,!1),window.addEventListener("resize",a,!1)},h=function(e){return u.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)},u.isScrolling=void 0,u.deltaX=0,u.element.style.MozTransitionDuration=u.element.style.webkitTransitionDuration=0,e.stopPropagation()},c=function(e){var t,n;if(e.touches.length>1||e.scale&&e.scale!==1)return;u.deltaX=e.touches[0].pageX-u.start.pageX,typeof u.isScrolling=="undefined"&&(u.isScrolling=!!(u.isScrolling||Math.abs(u.deltaX)<Math.abs(e.touches[0].pageY-u.start.pageY)));if(!u.isScrolling)return e.preventDefault(),t=!u.index&&u.deltaX>0||u.index===u.slides_length-1&&u.deltaX<0?Math.abs(u.deltaX)/u.width+1:1,u.deltaX=u.deltaX/t,n=u.deltaX-u.index*u.width,u.element.style.MozTransform=u.element.style.webkitTransform="translate3d("+n+"px,0,0)",e.stopPropagation()},l=function(e){var t,n;return n=Number(new Date)-u.start.time<250&&Math.abs(u.deltaX)>20||Math.abs(u.deltaX)>u.width/2,t=!u.index&&u.deltaX>0||u.index===u.slides_length-1&&u.deltaX<0,u.isScrolling||f(u.index+(n&&!t?u.deltaX<0?1:-1:0),u.speed),e.stopPropagation()},p=function(e){if(u.callback)return u.callback.apply(u.callback,[u.index,u.slides[u.index]])},a(),o(),{prev:i,next:n,position:r,refresh:s}},Lungo.Element.count=function(e,t){var n,r,i;r=Lungo.dom(e),r.children(".tag.count").remove();if(r&&t)return n=Lungo.Constants.BINDING.SELECTOR,i=Lungo.Attributes.count.html.replace(n,t),r.append(i)},Lungo.Element.loading=function(e,t){var n,r,i;r=Lungo.dom(e);if(r)return i=null,t&&(n=Lungo.Constants.BINDING.SELECTOR,i=Lungo.Attributes.loading.html.replace(n,t)),r.html(i)},Lungo.Element.progress=function(e,t){var n;n=Lungo.dom(e);if(n)return t+=Lungo.Constants.ATTRIBUTE.PERCENT,n.find(".value").style(Lungo.Constants.ATTRIBUTE.WIDTH,t)},Lungo.Element.Pull=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;return l=60,a=80,n=300,o=0,f=!1,u=$$(e),s=u.siblings('div[data-control="pull"]'),r=void 0,i={onPull:"Pull down to refresh",onRelease:"Release to...",onRefresh:"Loading...",callback:void 0},r=Lungo.Core.mix(i,t),c=function(){return v(0,!0),setTimeout(function(){return f=!1,document.removeEventListener("touchmove",h,!1)},n),o=0},v=function(e,t){var r;r=e>a?a:e,t&&u.addClass("pull"),u.style("-webkit-transform","translate(0, "+r+"px)");if(t)return setTimeout(function(){return u.removeClass("pull")},n)},m=function(e){f=!0,document.addEventListener("touchmove",h,!1),b(r.onRefresh),g(!0),v(l,!0);if(r.callback)return r.callback.apply(this)},b=function(e){return s.find("strong").html(e)},g=function(e){return e?s.addClass("refresh"):s.removeClass("refresh")},y=function(e){return e?s.addClass("rotate"):s.removeClass("rotate")},h=function(e){return e.preventDefault()},d=function(e){return v(o,!1),g(!1),o>l?(b(r.onRelease),y(!0)):(b(r.onPull),y(!1))},p=function(e){return o>l?m():c()},function(){var e,t;return t=!1,e={},u.bind("touchstart",function(n){if(u[0].scrollTop<=1)return t=!0,e=$$.isMobile()?n.touches[0].pageY:n.pageY}).bind("touchmove",function(n){var r;if(!f&&t){r=$$.isMobile()?n.touches[0].pageY:n.pageY,o=r-e;if(o>=0)return u.style("overflow-y","hidden"),d()}}).bind("touchend",function(){var e;return t&&(u.style("overflow-y","scroll"),p()),e={},t=!1})}(),{hide:c}},Lungo.Router=function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return t=e.Constants,n="#",a=[],o=function(r){var i,s,o;i=e.Element.Cache.section;if(f(i,r)){s=t.ELEMENT.SECTION+n+r,o=i?i.siblings(s):e.dom(s);if(o.length>0)return e.DEVICE===t.DEVICE.PHONE&&i!=null&&(e.Section.defineTransition(o,i),i.removeClass(t.CLASS.SHOW).addClass(t.CLASS.HIDE)),e.Section.show(i,o),e.Router.step(r),h(),c()}},r=function(n,r,i){var s,o;s=e.Element.Cache.article;if(f(s,r)){e.Router.section(n),o=e.Element.Cache.section.find("#"+r);if(o.length>0)return s.removeClass(t.CLASS.ACTIVE).trigger(t.TRIGGER.UNLOAD),e.Element.Cache.article=o.addClass(t.CLASS.ACTIVE).trigger(t.TRIGGER.LOAD),(i!=null?i.data(t.ATTRIBUTE.TITLE):void 0)!=null&&e.Element.Cache.section.find(t.QUERY.TITLE).text(i.data(t.ATTRIBUTE.TITLE)),h()}},i=function(){var r,i,o;return l(),r=e.Element.Cache.section,i=t.ELEMENT.SECTION+n+s(),o=r.siblings(i),e.DEVICE===t.DEVICE.PHONE&&(e.Aside.hide(),e.Section.assignTransition(o,o.data(t.TRANSITION.ORIGIN)),r.removeClass(t.CLASS.SHOW).addClass(t.CLASS.HIDING),setTimeout(function(){return r.removeClass(t.CLASS.HIDING)},t.TRANSITION.DURATION),o.hasClass("aside")&&e.Aside.toggle()),e.Section.show(r,o),h(),c()},u=function(e){if(e!==s())return a.push(e)},s=function(){return a[a.length-1]},f=function(e,n){return(e!=null?e.attr(t.ATTRIBUTE.ID):void 0)!==n},h=function(){var t,n,r;t="";for(n=0,r=a.length;n<r;n++)o=a[n],t+=""+o+"/";return t+=e.Element.Cache.article.attr("id"),setTimeout(function(){return window.location.hash=t},0),c()},c=function(){var n,r;return n=e.Element.Cache.article.attr(t.ATTRIBUTE.ID),e.dom(t.QUERY.ARTICLE_ROUTER).removeClass(t.CLASS.ACTIVE).filter("[data-view-article="+n+"]").addClass(t.CLASS.ACTIVE),r=e.Element.Cache.section.find(t.QUERY.ARTICLE_REFERENCE).addClass(t.CLASS.HIDE),r.filter("[data-article*='"+n+"']").removeClass(t.CLASS.HIDE)},l=function(){return a.length-=1},{section:o,article:r,back:i,history:s,step:u}}(Lungo),Lungo.Aside=function(e){var t,n,r,i,s,o,u;return t=e.Constants,n=function(n){var r,i;return r=n.data("aside"),i=e.Element.Cache.aside,i&&r!==(i!=null?i.attr(t.ATTRIBUTE.ID):void 0)&&(i.removeClass(t.CLASS.SHOW).removeClass(t.CLASS.ACTIVE),e.Element.Cache.aside=null),r&&(e.Element.Cache.aside=e.dom(t.ELEMENT.ASIDE+"#"+r),e.Element.Cache.aside.addClass(t.CLASS.ACTIVE),e.DEVICE!==t.DEVICE.PHONE&&e.Aside.show(r)),e.Element.Cache.aside},o=function(){var n;if(e.Element.Cache.aside)return n=e.Element.Cache.aside.hasClass(t.CLASS.SHOW),n?e.Aside.hide():e.Aside.show()},s=function(){if(e.Element.Cache.aside!=null){setTimeout(function(){return e.Element.Cache.aside.addClass(t.CLASS.SHOW)},t.TRANSITION.DURATION);if(e.DEVICE===t.DEVICE.PHONE)return e.Element.Cache.aside.addClass(t.CLASS.SHOW),e.Element.Cache.section.addClass(u()).addClass(t.CLASS.ASIDE)}},i=function(){if(e.Element.Cache.aside!=null&&e.DEVICE===t.DEVICE.PHONE)return e.Element.Cache.section.removeClass(t.CLASS.ASIDE),setTimeout(function(){return e.Element.Cache.aside.removeClass(t.CLASS.SHOW)},t.TRANSITION.DURATION)},r=function(){var n;return n=parseInt(document.body.getBoundingClientRect().width/3,10),n=128,e.dom(t.QUERY.HREF_ASIDE).each(function(){var r,o,u,a;return a=!1,o=e.dom(this),u=o.closest("section"),r=e.dom("aside#"+o.data("aside")),u.swiping(function(e){var n,i;if(!u.hasClass("aside"))return n=e.currentTouch.x-e.iniTouch.x,i=Math.abs(e.currentTouch.y-e.iniTouch.y),a=a?!0:n>3*i&&n<50,a?(n=n>256?256:n<0?0:n,r.addClass(t.CLASS.SHOW),u.vendor("transform","translateX("+n+"px)"),u.vendor("transition-duration","0s")):u.attr("style","")}),u.swipe(function(e){var t,o;return t=e.currentTouch.x-e.iniTouch.x,o=Math.abs(e.currentTouch.y-e.iniTouch.y),u.attr("style",""),t>n&&a?s(r):i(r),a=!1})})},u=function(){var n;return((n=e.Element.Cache.aside)!=null?n.hasClass(t.CLASS.RIGHT):void 0)?""+t.CLASS.RIGHT:"  "},{active:n,toggle:o,show:s,hide:i,draggable:r}}(Lungo),Lungo.Section=function(e){var t,n,r,i,s,o,u;return t=e.Constants,i=function(n,r){var i;return e.DEVICE===t.DEVICE.PHONE?o(r):u(n,r),e.Element.Cache.section=r,i=r.find(""+t.ELEMENT.ARTICLE+"."+t.CLASS.ACTIVE),i.length===0&&(i=r.find(t.ELEMENT.ARTICLE).first().addClass(t.CLASS.ACTIVE)),e.Element.Cache.article=i,e.Element.Cache.aside=e.Aside.active(r),r.hasClass("aside")&&e.Aside.show(),n&&n.trigger(t.TRIGGER.UNLOAD),r.trigger(t.TRIGGER.LOAD)},r=function(e,r){var i;i=e.data(t.ATTRIBUTE.TRANSITION);if(i)return s(r),n(r,i)},n=function(e,n){return e.data(t.ATTRIBUTE.TRANSITION,n)},o=function(e){return e.removeClass(t.CLASS.HIDE).addClass(t.CLASS.SHOW)},u=function(e,n){var r;return e&&(r=e.data(t.ATTRIBUTE.CHILDREN)),e&&(!r||r.indexOf(n.attr(t.ATTRIBUTE.ID))===-1)&&(e.addClass(t.CLASS.HIDE),setTimeout(function(){return e.removeClass(t.CLASS.SHOW).removeClass(t.CLASS.HIDE)},t.TRANSITION.DURATION)),setTimeout(function(){return n.addClass(t.CLASS.SHOW)},t.TRANSITION.DURATION)},s=function(e){return e.data(t.TRANSITION.ORIGIN,e.data(t.TRANSITION.ATTR))},{show:i,defineTransition:r,assignTransition:n}}(Lungo);